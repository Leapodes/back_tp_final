<!DOCTYPE html>
<html>
<head>
    <title>TP - Backend</title>
    <style>
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        h2 { margin-top: 40px; }
        form { margin: 10px 0; }
        input { margin: 5px; }
    </style>
</head>
<body>
    <h1>Panel Backend</h1>

    <% function renderTable(title, data, columns, tableName) { %>
        <h2><%= title %></h2>
        <table>
            <thead>
                <tr>
                    <% columns.forEach(col => { %>
                        <th><%= col %></th>
                    <% }) %>
                </tr>
            </thead>
            <tbody>
                <% data.forEach(row => { %>
                    <tr>
                        <% columns.forEach(col => { %>
                            <td><%= row[col] %></td>
                        <% }) %>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <!-- Crear registro -->
        <form action="/admin/<%= tableName %>/add" method="POST">
            <strong>Agregar:</strong>
            <% columns.filter(c => c !== 'id').forEach(col => { %>
                <input type="text" name="<%= col %>" placeholder="<%= col %>">
            <% }) %>
            <button type="submit">Agregar</button>
        </form>

        <!-- Editar registro -->
        <form action="/admin/<%= tableName %>/edit" method="POST">
            <strong>Modificar (por ID):</strong>
            <input type="number" name="id" placeholder="ID">
            <% columns.filter(c => c !== 'id').forEach(col => { %>
                <input type="text" name="<%= col %>" placeholder="<%= col %>">
            <% }) %>
            <button type="submit">Modificar</button>
        </form>

        <!-- Borrar registro -->
        <form action="/admin/<%= tableName %>/delete" method="POST">
            <strong>Eliminar (por ID):</strong>
            <input type="number" name="id" placeholder="ID">
            <button type="submit">Eliminar</button>
        </form>
    <% } %>

    <% renderTable("Productos", productos, Object.keys(productos[0] || {}), "productos"); %>
    <% renderTable("CategorÃ­as", categorias, Object.keys(categorias[0] || {}), "categorias"); %>
    <% renderTable("Usuarios", usuarios, Object.keys(usuarios[0] || {}), "usuarios"); %>
    <% renderTable("Ventas", ventas, Object.keys(ventas[0] || {}), "ventas"); %>
</body>
</html>
